(this["webpackJsonp@compendium/app"]=this["webpackJsonp@compendium/app"]||[]).push([[0],{174:function(e,t,n){"use strict";n.r(t);var o,c,r,a,i,s,u,d,l,m,f,j,b,v,g,O,h=n(0),p=n.n(h),x=n(74),S=n.n(x),I=n(7),y=n(32),C=n.n(y),D=n(48),H=n(10),w=n(3),k=n(4),E=function(e,t,n){var o=Object(h.useState)((function(){return JSON.parse(e.getItem(t))||(n instanceof Function?n():n)})),c=Object(k.a)(o,2),r=c[0],a=c[1];return Object(h.useEffect)((function(){e.setItem(t,JSON.stringify(r))}),[t,r,e]),[r,a]},P=n(52),T=function(e){return e._isRandom},z=function(e){var t=e.connectionId,n=e.roomId,o=e.game;return t===n?o.hostMoves:o.guestMoves},M=function(e){var t=e.connectionId,n=e.roomId,o=e.game,c=e.move;return z({connectionId:t,roomId:n,game:o})[c]},B=function(e){var t=e.game,n=e.connectionId,o=e.roomId,c=e.handleMove;return new Proxy({},{get:function(e,r,a){var i=z({connectionId:n,roomId:o,game:t});return i.hasOwnProperty(r)?function(e){return c({move:r,args:e})}:r===Symbol.iterator&&i?i.keys().bind(e)[Symbol.iterator]:Reflect.get(e,r,a)}})},F=function(e){return e._isSecret},L=function(e){var t=e.roomId,n=e.game,o=e.random,c=e.connectionIds,r=e.logEvent,a=function(e){var t=E(window.localStorage,"hostState-".concat(e),{}),n=Object(k.a)(t,2);return{states:n[0],setStates:n[1]}}(t),i=a.states,s=a.setStates;return{state:Object(h.useMemo)((function(){return i[t]||{}}),[t,i]),input:Object(h.useCallback)((function(e){var a=e.connectionId,u=e.move,d=e.args,l=function(e,t){return t(i[e])};s((function(e){return[].concat(Object(H.a)(c),[t]).reduce((function(c,i){try{var s=function(e){var t=e.state,n=e.contextId,o=e.connectionId,c=e.roomId,r=e.random,a=e.game,i=e.move,s=e.args,u=e.revealSecret,d=M({connectionId:o,roomId:c,game:a,move:i}),l={connectionId:o,move:i,args:s},m={state:t,roomId:c,connectionId:o,args:s};T(d)&&(l.seed=function(e){return e()}(r),m.random=C()(l.seed)),F(d)&&(m.contextId=n,m.revealSecret=u);var f=d(m);return F(d)&&(l.patch=Object(P.diff)(t,f)),{state:f,event:l}}({state:e[i]||{},connectionId:a,args:d,move:u,roomId:t,game:n,contextId:i,random:o,revealSecret:l}),m=s.state,f=s.event;c[i]=m,r({connectionId:i,event:f})}catch(j){console.error("Invalid Event",j)}finally{return c}}),{})}))}),[r,c,i,t,n,o,s])}},G=n(40),J=n(41),K=n(75),A=n.n(K),N=function(e){(0,e.setPeer)((function(e){return e&&e.destroy(),null}))},R={host:"signalling.compendium.games",secure:!0},Q=function(e){var t=Object(h.useState)(),n=Object(k.a)(t,2),o=n[0],c=n[1],r=Object(h.useState)(!1),a=Object(k.a)(r,2),i=a[0],s=a[1],u=Object(h.useReducer)((function(e){return e+1}),0),d=Object(k.a)(u,2),l=d[0],m=d[1];return Object(h.useEffect)((function(){if(!i){var t=new A.a(e,R);c(t);var n=function(){s(!1),N({setPeer:c}),m()},o=setTimeout(n,1e3);t.on("open",(function(){clearTimeout(o),s(!0)}));var r=function(){clearTimeout(o),o=setTimeout(n,1e3)};return t.on("close",r),t.on("disconnected",r),t.on("error",r),function(){N({setPeer:c}),clearTimeout(o)}}}),[l,e]),{open:i,peer:o}},_=function(e){var t=e.game,n=e.roomId,o=Q(n).peer,c=Object(h.useState)([]),r=Object(k.a)(c,2),a=r[0],i=r[1],s=Object(h.useRef)({}),u=Object(h.useReducer)((function(e,t){return[].concat(Object(H.a)(e),[t])}),[]),d=Object(k.a)(u,2),l=d[0],m=d[1],f=Object(h.useState)((function(){return function(){}})),j=Object(k.a)(f,2),b=j[0],v=j[1];return Object(h.useEffect)((function(){o&&b&&o.on("connection",(function(e){e.on("open",(function(){!function(e){var t=e.setConnections,n=e.conn;t((function(e){return[].concat(Object(H.a)(e),[n])}))}({setConnections:i,conn:e}),m(e.peer)})),e.on("data",(function(n){var o=n.index,c=Object(G.a)(n,["index"]);Object(J.isInteger)(o)&&function(e){var t=e.conn,n=e.connectionLogSizeMap,o=e.size,c=void 0===o?0:o;n.current[t.peer]=c}({conn:e,connectionLogSizeMap:s,size:o+1}),(Object(J.isInteger)(o)||null===o)&&function(e,t){return e&&Object(J.isString)(e.move)&&Object(J.isObject)(e.args)&&t.findIndex((function(t){return t===e.move}))>-1}(c,Object.keys(t.guestMoves))&&b(Object(w.a)(Object(w.a)({},c),{},{connectionId:e.peer}))})),e.on("close",(function(){!function(e){var t=e.setConnections,n=e.conn;t((function(e){return e.filter((function(e){return e!==n}))}))}({setConnections:i,conn:e})})),e.on("error",(function(t){console.error(e.peer,t)}))}))}),[o,t,n,b]),{connections:a,connectionIds:l,connectionLogSizeMap:s,setOnGuestEvent:v}},W=function(e){var t=e.roomId,n=e.game,o=Object(h.useState)((function(){})),c=Object(k.a)(o,2),r=c[0],a=c[1],i=Object(h.useCallback)((function(e){r(Object(w.a)(Object(w.a)({},e),{},{connectionId:t}))}),[t,r]);return{moves:Object(h.useMemo)((function(){return i&&t&&n?B({game:n,connectionId:t,roomId:t,handleMove:i}):{}}),[t,n,i]),setOnHostEvent:a}},q=n(37),U=function(e){var t=e.connections,n=e.connectionLogSizeMap,o=e.eventLogs;Object(h.useEffect)((function(){if(null!=o){var e,c=Object(q.a)(t);try{var r=function(){var t=e.value,c=o[t.peer]||[],r=n.current[t.peer]||0;if(c.length>r){var a=c.slice(r).map((function(e,t){return Object(w.a)(Object(w.a)({},e),{},{index:r+t})}));t.send(a)}};for(c.s();!(e=c.n()).done;)r()}catch(a){c.e(a)}finally{c.f()}}}),[t,n,o])},X=n(76),Y=function(e){var t=e.setOnGuestEvent,n=e.setOnHostEvent,o=e.input,c=Object(h.useState)([]),r=Object(k.a)(c,2),a=r[0],i=r[1];Object(h.useEffect)((function(){var e=function(e){return i((function(t){return[].concat(Object(H.a)(t),[e])}))};t((function(){return e})),n((function(){return e}))}),[t,n,i]),Object(h.useEffect)((function(){a.length&&o&&i((function(e){var t=Object(X.a)(e),n=t[0],c=t.slice(1);return o(n),c}))}),[a,o])},V=function(e){var t=e.roomId,n=e.game,o=e.secret,c=Object(h.useMemo)((function(){return C()(o||t)}),[o,t]),r=function(e){var t=E(window.localStorage,"eventLog-".concat(e),{}),n=Object(k.a)(t,2),o=n[0],c=n[1];return{eventLogs:o,logEvent:Object(h.useCallback)((function(e){var t=e.connectionId,n=e.event;c((function(e){var o=e[t]||[];return Object(w.a)(Object(w.a)({},e),{},Object(D.a)({},t,[].concat(Object(H.a)(o),[n])))}))}),[c])}}(t),a=r.eventLogs,i=r.logEvent,s=_({game:n,roomId:t}),u=s.setOnGuestEvent,d=s.connections,l=s.connectionIds,m=s.connectionLogSizeMap,f=W({roomId:t,game:n}),j=f.setOnHostEvent,b=f.moves,v=L({roomId:t,game:n,eventLogs:a,logEvent:i,random:c,connectionIds:l}),g=v.state,O=v.input;return Y({setOnHostEvent:j,setOnGuestEvent:u,input:O}),U({connections:d,connectionLogSizeMap:m,eventLogs:a}),{state:g,moves:b,connections:Object(h.useMemo)((function(){return d.map((function(e){return e.peer}))}),[d])}},Z=function(e){var t=e-1;return t<0?null:t},$=function(e){var t=e.game,n=e.events,o=e.roomId;return function(e){try{return n.reduce((function(e,n){var c=M({connectionId:n.connectionId,roomId:o,game:t,move:n.move}),r={state:e,roomId:o,connectionId:n.connectionId,args:n.args};if(T(c)){if(null==n.seed)throw new Error("Random moves require a seed from the host");r.random=C()(n.seed)}if(F(c)){if(null==n.patch)throw new Error("Secret moves require a state patch from the host");return Object(P.patch)(e,n.patch),e}return c(r)}),e)}catch(c){return console.error(c),e}}},ee=function(e){var t=e.connected,n=e.conn,o=e.logSize;Object(h.useEffect)((function(){n.current&&t&&function(e){var t=e.conn,n=e.logSize;t.current.send({index:Z(n)})}({conn:n,logSize:o})}),[t,n,o])},te=function(e){var t=e.data,n=e.clearData,o=e.game,c=e.roomId,r=e.setState,a=e.setLogSize;Object(h.useEffect)((function(){if(t&&t.length){var e=Object(H.a)(t);n(),function(e){var t=e.setLogSize,n=e.events;t(n[n.length-1].index+1)}({setLogSize:a,events:e}),function(e){var t=e.setState,n=e.roomId,o=e.game,c=e.events,r=$({game:o,roomId:n,events:c});t((function(e){var t=e.state,n=r(t);return{state:n,cache:n}}))}({setState:r,roomId:c,game:o,events:e})}}),[t,n,o,c,a,r])},ne=function(e){var t=e.conn,n=e.connectionId,o=e.setMoves,c=e.setState,r=e.game,a=e.logSize,i=e.roomId,s=function(e){var o=e.move,s=e.args,u=M({connectionId:n,roomId:i,game:r,move:o});T(u)||F(u)||function(e){var t=e.setState,n=e.game,o=e.move,c=e.args,r=e.connectionId,a=e.roomId,i=$({game:n,roomId:a,events:[{move:o,args:c,connectionId:r}]});t((function(e){var t=e.state,n=e.cache;return{cache:i(n),state:t}}))}({setState:c,game:r,move:o,args:s,roomId:i,connectionId:n}),function(e){var t=e.conn,n=e.logSize,o=e.move,c=e.args;t.current.send({index:Z(n),move:o,args:c})}({conn:t,move:o,args:s,logSize:a})};o((function(){return B({game:r,connectionId:n,roomId:i,handleMove:s})}))},oe=function(e){var t=e.connected,n=e.conn,o=e.id,c=e.setState,r=e.roomId,a=e.game,i=e.logSize,s=Object(h.useState)(null),u=Object(k.a)(s,2),d=u[0],l=u[1];return Object(h.useEffect)((function(){t&&ne({conn:n,connectionId:o,setMoves:l,setState:c,roomId:r,game:a,logSize:i})}),[t,n,o,l,c,r,a,i]),{moves:d}},ce=function(e){var t=e.id,n=e.roomId,o=Object(h.useRef)(),c=Q(t),r=c.open,a=c.peer,i=Object(h.useState)([]),s=Object(k.a)(i,2),u=s[0],d=s[1],l=Object(h.useState)(!1),m=Object(k.a)(l,2),f=m[0],j=m[1],b=Object(h.useReducer)((function(e){return e+1}),0),v=Object(k.a)(b,2),g=v[0],O=v[1];Object(h.useEffect)((function(){if(a&&r&&!f){!function(e){var t=e.roomId,n=e.peer;e.conn.current=n.connect(t,{serialization:"json"})}({conn:o,peer:a,roomId:n});var e=function(){o.current=null,j(!1),O()},t=setTimeout(e,1e3);o.current.on("open",(function(){clearTimeout(t),j(!0)})),o.current.on("data",(function(e){d((function(t){return[].concat(Object(H.a)(t),Object(H.a)(e))}))})),o.current.on("close",(function(){clearTimeout(t),e()})),o.current.on("error",(function(e){console.error(e)}))}}),[g,r,f,n,a]);return{connected:r&&f,conn:o,data:u,clearData:function(){return d([])}}},re=n(176),ae=function(e){var t=e.roomId,n=e.game,o=function(e){var t=E(window.localStorage,"id-".concat(e),re.a);return{id:Object(k.a)(t,1)[0]}}(t).id,c=function(e){var t=E(window.localStorage,"guestState-".concat(e),{state:{},cache:{}}),n=Object(k.a)(t,2);return{cache:n[0].cache,setState:n[1]}}(t),r=c.cache,a=c.setState,i=function(e){var t=E(window.localStorage,"logSize-".concat(e),0),n=Object(k.a)(t,2);return{logSize:n[0],setLogSize:n[1]}}(t),s=i.logSize,u=i.setLogSize,d=ce({id:o,roomId:t}),l=d.connected,m=d.conn,f=d.data,j=d.clearData;return ee({connected:l,conn:m,logSize:s}),te({data:f,clearData:j,game:n,roomId:t,setState:a,setLogSize:u}),{connectionId:o,connected:l,state:r,moves:oe({connected:l,conn:m,id:o,setState:a,roomId:t,game:n,logSize:s}).moves}},ie=n(11),se=n(35),ue={guestMoves:{fillSquare:function(e){var t=e.state,n=e.connectionId,o=e.args,c=null;if(n===t.crossesPlayer)c=2;else{if(n!==t.noughtsPlayer)throw new Error("Connection is not a player");c=1}if(null!==t.board[o.position])throw new Error("Position filled");var r=Object(H.a)(t.board);return r.splice(o.position,1,c),Object(w.a)(Object(w.a)({},t),{},{board:r})}},hostMoves:{startGame:function(e){e.state,e.connectionId;var t=e.args;return{crossesPlayer:t.crossesConnId,noughtsPlayer:t.noughtsConnId,board:Array(9).fill(null)}}}},de=n(15),le=n(1),me=I.default.button(o||(o=Object(de.a)(["\n  width: 33.333%;\n  height: 33.333%;\n  background-color: white;\n  border: 2px solid red;\n  color: black;\n  text-align: center;\n  float: left;\n  box-sizing: border-box;\n"]))),fe=I.default.div(c||(c=Object(de.a)(["\n  width: 33.333%;\n  height: 33.333%;\n  background-color: white;\n  border: 2px solid red;\n  color: black;\n  text-align: center;\n  float: left;\n  box-sizing: border-box;\n"]))),je=I.default.div(r||(r=Object(de.a)(["\n  width: 30em;\n  height: 30em;\n"]))),be=function(e){var t=e.value,n=e.onClick;return null===t?Object(le.jsx)(me,{onClick:n}):Object(le.jsxs)(fe,{children:[1===t?"O":null,2===t?"X":null]})},ve=function(e){var t=e.connected,n=e.state,o=e.moves;return Object(le.jsxs)(le.Fragment,{children:[t?null:Object(le.jsx)("p",{children:"Disconnected.."}),Object(le.jsx)(je,{children:n.board&&n.board.map((function(e,n){return Object(le.jsx)(be,{value:e,onClick:function(){return t&&o.fillSquare({position:n})}},n)}))})]})},ge=I.default.div(a||(a=Object(de.a)(["\n  width: 33.333%;\n  height: 33.333%;\n  background-color: cyan;\n  border: 2px solid yellow;\n  color: black;\n  text-align: center;\n  float: left;\n  box-sizing: border-box;\n"]))),Oe=I.default.div(i||(i=Object(de.a)(["\n  width: 30em;\n  height: 30em;\n"]))),he={name:"Tic Tac Toe",Host:function(e){var t=e.state,n=e.roomId,o=e.moves,c=e.connections;return Object(h.useEffect)((function(){if(!t.board&&c.length>=2){var e=Object(k.a)(c,2),n=e[0],r=e[1];o.startGame({crossesConnId:n,noughtsConnId:r})}}),[c]),Object(le.jsxs)(le.Fragment,{children:[c.length<2&&Object(le.jsxs)(se.b,{to:"/guest/".concat(n),children:[window.location.host,"#/guest/",n]}),Object(le.jsx)(Oe,{children:t.board&&t.board.map((function(e,t){return Object(le.jsxs)(ge,{children:[1===e?"O":null,2===e?"X":null]},t)}))})]})},Guest:ve,game:ue},pe={guestMoves:{joinAsAPlayer:function(e){var t=e.state,n=e.connectionId,o=e.args;if(t.players.list.length>=t.players.maxPlayers)throw new Error("The number of players has reached it's maximum");var c={connectionId:n,name:o.name,emoji:o.emoji},r=[].concat(Object(H.a)(t.players.list),[c]),a=Object(w.a)(Object(w.a)({},t.players),{},{list:r});return Object(w.a)(Object(w.a)({},t),{},{players:a})}},hostMoves:{initPlayers:function(e){var t=e.state,n=e.args,o={maxPlayers:n.maxPlayers,minPlayers:n.minPlayers,everyoneIsIn:!1,list:[]};return Object(w.a)(Object(w.a)({},t),{},{players:o})},everyoneIsIn:function(e){var t=e.state;if(t.players.list.length>t.players.maxPlayers)throw new Error("Too many players");if(t.players.list.length<t.players.minPlayers)throw new Error("Not enough players");return Object(w.a)(Object(w.a)({},t),{},{players:Object(w.a)(Object(w.a)({},t.players),{},{everyoneIsIn:!0})})}}},xe=n.p+"static/media/AH.1a5ea790.svg",Se=n.p+"static/media/AC.0e3c2151.svg",Ie=n.p+"static/media/AD.5c4da062.svg",ye=n.p+"static/media/AS.0beacefa.svg",Ce=n.p+"static/media/2H.cb701b97.svg",De=n.p+"static/media/2C.276c3f69.svg",He=n.p+"static/media/2D.bc21ec2a.svg",we=n.p+"static/media/2S.ec187ad2.svg",ke=n.p+"static/media/3H.cba17cfa.svg",Ee=n.p+"static/media/3C.4defbcf5.svg",Pe=n.p+"static/media/3D.8d12a3fc.svg",Te=n.p+"static/media/3S.ed80cdda.svg",ze=n.p+"static/media/4H.8924ea52.svg",Me=n.p+"static/media/4C.3ebe0e73.svg",Be=n.p+"static/media/4D.433a1ecc.svg",Fe=n.p+"static/media/4S.7e474260.svg",Le=n.p+"static/media/5H.04a38bb9.svg",Ge=n.p+"static/media/5C.809e552d.svg",Je=n.p+"static/media/5D.03b1a4af.svg",Ke=n.p+"static/media/5S.f4e082a6.svg",Ae=n.p+"static/media/6H.5380d254.svg",Ne=n.p+"static/media/6C.1f69ca79.svg",Re=n.p+"static/media/6D.8c9d26ce.svg",Qe=n.p+"static/media/6S.33eb8c1b.svg",_e=n.p+"static/media/7H.156a2f08.svg",We=n.p+"static/media/7C.cb6a5b5c.svg",qe=n.p+"static/media/7D.bc93fd45.svg",Ue=n.p+"static/media/7S.f91490c5.svg",Xe=n.p+"static/media/8H.878dbca5.svg",Ye=n.p+"static/media/8C.e91af699.svg",Ve=n.p+"static/media/8D.ca4420e9.svg",Ze=n.p+"static/media/8S.fd5cd6f8.svg",$e=n.p+"static/media/9H.57bfd8e3.svg",et=n.p+"static/media/9C.c6a841cc.svg",tt=n.p+"static/media/9D.3d612a15.svg",nt=n.p+"static/media/9S.6c7e4615.svg",ot=n.p+"static/media/10H.c8c8e4de.svg",ct=n.p+"static/media/10C.0cc64a48.svg",rt=n.p+"static/media/10D.956683a1.svg",at=n.p+"static/media/10S.99cb26ab.svg",it=n.p+"static/media/JH.86f58f4f.svg",st=n.p+"static/media/JC.b801c5a7.svg",ut=n.p+"static/media/JD.a0e75607.svg",dt=n.p+"static/media/JS.1a6f34e2.svg",lt=n.p+"static/media/QH.f56614ef.svg",mt=n.p+"static/media/QC.3eb5bae0.svg",ft=n.p+"static/media/QD.c20eb8d2.svg",jt=n.p+"static/media/QS.cc68ac97.svg",bt=n.p+"static/media/KH.3d6b1be6.svg",vt=n.p+"static/media/KC.ca193598.svg",gt=n.p+"static/media/KD.32d1a9f8.svg",Ot=n.p+"static/media/KS.b54b6bba.svg",ht=n.p+"static/media/JOKER.96be08d3.svg",pt=["H","D","S","C"],xt=11,St=12,It=13,yt=[1,2,3,4,5,6,7,8,9,10,xt,St,It],Ct=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.jokers,o=void 0===n?0:n,c=[],r=Object(q.a)(pt);try{for(r.s();!(e=r.n()).done;){var a,i=e.value,s=Object(q.a)(yt);try{for(s.s();!(a=s.n()).done;){var u=a.value;c.push({suit:i,value:u})}}catch(l){s.e(l)}finally{s.f()}}}catch(l){r.e(l)}finally{r.f()}for(var d=0;d<o;d++)c.push({suit:null,value:0});return c},Dt=I.default.div(s||(s=Object(de.a)(["\n  margin-bottom: -9em;\n  margin-right: -3em;\n\n  ","\n"])),(function(e){var t=e.order;return t&&"order: ".concat(t,";")})),Ht=I.default.div(u||(u=Object(de.a)(["\n  position: relative;\n  margin-top: 2em;\n"]))),wt=Object(I.default)(Ht)(d||(d=Object(de.a)(["\n  &:hover {\n    margin-top: 1em;\n    margin-bottom: 1em;\n    cursor: pointer;\n  }\n\n  ","\n"])),(function(e){return e.isSelected&&"\n    margin-top: 0em;\n    margin-bottom: 2em;\n\n    &:hover {\n      margin-top: 0em;\n      margin-bottom: 2em;\n    }\n  "})),kt=I.default.div(l||(l=Object(de.a)(["\n  opacity: 0.4;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  border-radius: 0.5em;\n\n  ","\n"])),(function(e){var t=e.isSelected,n=e.selectColor;return t&&n&&"\n    background-color: ".concat(n,";\n  ")})),Et=I.default.img(m||(m=Object(de.a)(["\n  width: 9em;\n  display: block;\n"]))),Pt=function(e){var t=e.isSelected,n=e.selectColor,o=e.faceImage,c=e.altText,r=e.onClick;return Object(le.jsxs)(wt,{isSelected:t,children:[Object(le.jsx)(Et,{src:o,alt:c}),Object(le.jsx)(kt,{isSelected:t,selectColor:n,onClick:r})]})},Tt=function(e){var t=e.faceImage,n=e.altText;return Object(le.jsx)(Ht,{children:Object(le.jsx)(Et,{src:t,alt:n})})},zt=function(e){var t=e.order,n=e.canBeSelected,o=e.isSelected,c=e.selectColor,r=e.faceImage,a=e.altText,i=e.onClick,s=n?Pt:Tt;return Object(le.jsx)(Dt,{order:t,children:Object(le.jsx)(s,{isSelected:o,selectColor:c,faceImage:r,altText:a,onClick:i})})},Mt=function(e){var t=e.value,n=e.suit,o=e.canBeSelected,c=void 0!==o&&o,r=e.isSelected,a=void 0!==r&&r,i=e.selectColor,s=void 0===i?null:i;console.log("select",s);var u=function(e){var t=e.suit,n=e.value;return 0===n?ht:1===n&&"H"===t?xe:1===n&&"D"===t?Ie:1===n&&"S"===t?ye:1===n&&"C"===t?Se:2===n&&"H"===t?Ce:2===n&&"D"===t?He:2===n&&"S"===t?we:2===n&&"C"===t?De:3===n&&"H"===t?ke:3===n&&"D"===t?Pe:3===n&&"S"===t?Te:3===n&&"C"===t?Ee:4===n&&"H"===t?ze:4===n&&"D"===t?Be:4===n&&"S"===t?Fe:4===n&&"C"===t?Me:5===n&&"H"===t?Le:5===n&&"D"===t?Je:5===n&&"S"===t?Ke:5===n&&"C"===t?Ge:6===n&&"H"===t?Ae:6===n&&"D"===t?Re:6===n&&"S"===t?Qe:6===n&&"C"===t?Ne:7===n&&"H"===t?_e:7===n&&"D"===t?qe:7===n&&"S"===t?Ue:7===n&&"C"===t?We:8===n&&"H"===t?Xe:8===n&&"D"===t?Ve:8===n&&"S"===t?Ze:8===n&&"C"===t?Ye:9===n&&"H"===t?$e:9===n&&"D"===t?tt:9===n&&"S"===t?nt:9===n&&"C"===t?et:10===n&&"H"===t?ot:10===n&&"D"===t?rt:10===n&&"S"===t?at:10===n&&"C"===t?ct:n===xt&&"H"===t?it:n===xt&&"D"===t?ut:n===xt&&"S"===t?dt:n===xt&&"C"===t?st:n===St&&"H"===t?lt:n===St&&"D"===t?ft:n===St&&"S"===t?jt:n===St&&"C"===t?mt:n===It&&"H"===t?bt:n===It&&"D"===t?gt:n===It&&"S"===t?Ot:n===It&&"C"===t?vt:void 0}({value:t,suit:n}),d=function(e){var t=e.value,n=e.suit;return 0===t?"\ud83c\udccf Joker":1===t&&"H"===n?"\ud83c\udcb1 Ace of Hearts":1===t&&"D"===n?"\ud83c\udcc1 Ace of Diamonds":1===t&&"S"===n?"\ud83c\udca1 Ace of Spaces":1===t&&"C"===n?"\ud83c\udcd1 Ace of Clubs":2===t&&"H"===n?"\ud83c\udcb2 Two of Hearts":2===t&&"D"===n?"\ud83c\udcc2 Two of Diamonds":2===t&&"S"===n?"\ud83c\udca2 Two of Spades":2===t&&"C"===n?"\ud83c\udcd2 Two of Clubs":3===t&&"H"===n?"\ud83c\udcb3 Three of Hearts":3===t&&"D"===n?"\ud83c\udcc3 Three of Diamonds":3===t&&"S"===n?"\ud83c\udca3 Three of Spades":3===t&&"C"===n?"\ud83c\udcd3 Three of Clubs":4===t&&"H"===n?"\ud83c\udcb4 Four of Hearts":4===t&&"D"===n?"\ud83c\udcc4 Four of Diamonds":4===t&&"S"===n?"\ud83c\udca4 Four of Spades":4===t&&"C"===n?"\ud83c\udcd4 Four of Clubs":5===t&&"H"===n?"\ud83c\udcb5 Five of Hearts":5===t&&"D"===n?"\ud83c\udcc5 Five of Diamonds":5===t&&"S"===n?"\ud83c\udca5 Five of Spades":5===t&&"C"===n?"\ud83c\udcd5 Five of Clubs":6===t&&"H"===n?"\ud83c\udcb6 Six of Hearts":6===t&&"D"===n?"\ud83c\udcc6 Six of Diamomnds":6===t&&"S"===n?"\ud83c\udca6 Six of Spades":6===t&&"C"===n?"\ud83c\udcd6 Six of Clubs":7===t&&"H"===n?"\ud83c\udcb7 Seven of Hearts":7===t&&"D"===n?"\ud83c\udcc7 Seven of Diamonds":7===t&&"S"===n?"\ud83c\udca7 Seven of Spades":7===t&&"C"===n?"\ud83c\udcd7 Seven of Clubs":8===t&&"H"===n?"\ud83c\udcb8 Eight of Hearts":8===t&&"D"===n?"\ud83c\udcc8 Eight of Diamonds":8===t&&"S"===n?"\ud83c\udca8 Eight of Spades":8===t&&"C"===n?"\ud83c\udcd8 Eight of Clubs":9===t&&"H"===n?"\ud83c\udcb9 Nine of Hearts":9===t&&"D"===n?"\ud83c\udcc9 Nine of Diamonds":9===t&&"S"===n?"\ud83c\udca9 Nine of Spades":9===t&&"C"===n?"\ud83c\udcd9 Nine of Clubs":10===t&&"H"===n?"\ud83c\udcba Ten of Hearts":10===t&&"D"===n?"\ud83c\udcca Ten of Diamonds":10===t&&"S"===n?"\ud83c\udcaa Ten of Spades":10===t&&"C"===n?"\ud83c\udcda Ten of Clubs":t===xt&&"H"===n?"\ud83c\udcbb Jack of Hearts":t===xt&&"D"===n?"\ud83c\udccb Jack of Diamonds":t===xt&&"S"===n?"\ud83c\udcab Jack of Spades":t===xt&&"C"===n?"\ud83c\udcdb Jack of Clubs":t===St&&"H"===n?"\ud83c\udcbd Queen of Hearts":t===St&&"D"===n?"\ud83c\udccd Queen of Diamonds":t===St&&"S"===n?"\ud83c\udcad Queen of Spades":t===St&&"C"===n?"\ud83c\udcdd Queen of Clubs":t===It&&"H"===n?"\ud83c\udcbe King of Hearts":t===It&&"D"===n?"\ud83c\udcde King of Diamonds":t===It&&"S"===n?"\ud83c\udcae King of Spades":t===It&&"C"===n?"\ud83c\udcde King of Clubs":void 0}({value:t,suit:n});return Object(le.jsx)(zt,{faceImage:u,altText:d,isSelected:a,canBeSelected:c,selectColor:s})},Bt=n.p+"static/media/RED_BACK.eea8c6b0.svg",Ft=n.p+"static/media/BLUE_BACK.d7aabd90.svg",Lt=function(e){var t=e.colour,n=e.isSelected,o=void 0!==n&&n,c=e.canBeSelected,r=void 0!==c&&c,a=e.selectColor,i=void 0===a?null:a,s=function(e){var t=e.colour;return"R"===t?Bt:"B"===t?Ft:void 0}({colour:t});return Object(le.jsx)(zt,{faceImage:s,altText:"\ud83c\udca0 Card Back",isSelected:o,canBeSelected:r,selectColor:i})},Gt=n.p+"static/media/felt.5b148bae.png",Jt=I.default.div(f||(f=Object(de.a)(["\n  background-color: rgb(10, 80, 20);\n  background-image: url(",");\n  height: 100%;\n  padding: 5%;\n"])),Gt),Kt=I.default.section(j||(j=Object(de.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-evenly;\n  max-height: 50%;\n\n  padding-right: 3em;\n  padding-bottom: 9em;\n"]))),At=Mt,Nt={guestMoves:Object(w.a)({},pe.guestMoves),hostMoves:Object(w.a)(Object(w.a)({},pe.hostMoves),{},{startGame:function(e){var t,n=e.state,o=e.roomId,c=e.connectionId,r=Object(w.a)(Object(w.a)({},n),{},{discard:[]});return(t={roomId:o,connectionId:c}).roomId===t.connectionId?r.deck=Ct():r.hand=[],r},deal:function(){}})},Rt=n(80),Qt=Object(h.memo)((function(e){var t=e.emoji;return Object(le.jsx)("span",{dangerouslySetInnerHTML:{__html:Rt.a.parse(t,{folder:"svg",ext:".svg"})}})})),_t=n(84),Wt=(n(106),I.default.div(b||(b=Object(de.a)(["\n  background-color: rgba(0, 0, 0, 0.8);\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])))),qt=I.default.div(v||(v=Object(de.a)(["\n  display: inline-block;\n"]))),Ut=function(e){var t=e.onSelectEmoji,n=e.onHide;return Object(le.jsx)(Wt,{tabIndex:!0,onKeyPress:n,onClick:n,children:Object(le.jsx)(qt,{onClick:function(e){return e.stopPropagation()},children:Object(le.jsx)(_t.a,{onSelect:function(e){t(e.native)},set:"twitter"})})})},Xt=Qt,Yt=n(6),Vt=function(e){var t=e.children,n=e.players;return Object(le.jsxs)(Yt.Flex,{children:[Object(le.jsx)(Yt.Box,{flexGrow:1,children:n.map((function(e,t){var n=e.name,o=e.emoji;return Object(le.jsxs)(Yt.Flex,{alignItems:"center",children:[Object(le.jsx)(Yt.Box,{width:"2em",height:"2em",my:2,mx:3,children:o&&Object(le.jsx)(Xt,{emoji:o})}),n]},t)}))}),Object(le.jsx)(Yt.Box,{flexGrow:3,children:t})]})},Zt=function(e){var t=e.roomId;return Object(le.jsxs)(Yt.Text,{fontSize:[3,4,5],fontWeight:"bold",color:"secondary",children:["Join: ",t]})},$t=function(e){var t=e.state,n=e.roomId,o=e.moves,c=(e.connections,e.maxPlayers),r=e.minPlayers,a=e.children;if(Object(h.useEffect)((function(){!t.players&&(null===o||void 0===o?void 0:o.initPlayers)&&o.initPlayers({maxPlayers:c,minPlayers:r})}),[t.players,o]),!t.players)return null;if(t.players.everyonesIn)return a;var i=function(e){var t=e.state.players;return t.list.length>=t.minPlayers}({state:t});return Object(le.jsx)(Vt,{players:t.players.list,children:Object(le.jsxs)(Yt.Flex,{height:"100%",flexDirection:"column",alignItems:"center",justifyContent:"space-around",children:[Object(le.jsx)(Zt,{roomId:n}),i&&Object(le.jsx)(Yt.Button,{my:2,onClick:function(){return o.startGame()},onKeyPress:function(){return o.startGame()},children:"Start Game"})]})})},en=n(29),tn=function(e){var t=e.onJoin,n=Object(h.useState)(""),o=Object(k.a)(n,2),c=o[0],r=o[1],a=Object(h.useState)("\ud83d\ude0e"),i=Object(k.a)(a,2),s=i[0],u=i[1],d=Object(h.useState)(!1),l=Object(k.a)(d,2),m=l[0],f=l[1],j=function(){return f(!0)},b=function(){return f(!1)},v=function(){(null===c||void 0===c?void 0:c.length)&&t({name:c,emoji:s})};return Object(le.jsxs)(le.Fragment,{children:[m&&Object(le.jsx)(Ut,{onHide:b,onSelectEmoji:function(e){u(e),b()}}),Object(le.jsxs)(Yt.Flex,{my:5,alignItems:"center",flexDirection:"column",children:[Object(le.jsx)(Yt.Box,{width:"10em",height:"10em",onKeyPress:j,onClick:j,children:Object(le.jsx)(Xt,{emoji:s})}),Object(le.jsx)(Yt.Box,{my:2,children:Object(le.jsx)(Yt.Text,{fontSize:[3,4,5],fontWeight:"bold",color:"primary",children:c})}),Object(le.jsxs)(Yt.Box,{children:[Object(le.jsx)(en.Label,{htmlFor:"nickname",children:"Nickname"}),Object(le.jsx)(en.Input,{id:"nickname",onChange:function(e){return r(e.target.value)},value:c})]}),Object(le.jsx)(Yt.Box,{my:3,children:Object(le.jsx)(Yt.Button,{variant:"primary",onKeyPress:v,onClick:v,children:"Sit down to Play"})})]})]})},nn=function(){return Object(le.jsx)(Yt.Flex,{height:"100vh",justifyContent:"center",alignItems:"center",children:Object(le.jsx)(Yt.Text,{fontSize:[3,4,5],fontWeight:"bold",color:"primary",children:"You are a Spectator"})})},on=function(){return Object(le.jsx)(Yt.Flex,{height:"100vh",justifyContent:"center",alignItems:"center",children:Object(le.jsx)(Yt.Text,{fontSize:[3,4,5],fontWeight:"bold",color:"primary",children:"Be patient, the host is setting up your game."})})},cn=function(e){var t=e.children,n=e.state,o=(e.roomId,e.moves),c=e.connectionId;if(!n.players)return Object(le.jsx)(on,{});var r=function(e){var t=e.players,n=e.connectionId;return t.findIndex((function(e){return e.connectionId===n}))>-1}({players:n.players.list,connectionId:c});if(n.players.everyonesIn)return r?t:Object(le.jsx)(nn,{});var a=function(e){var t=e.state.players;return t.list.length>t.maxPlayers}({state:n});return r||a?Object(le.jsx)(on,{}):Object(le.jsx)(tn,{onJoin:function(e){var t=e.name,n=e.emoji;o.joinAsAPlayer({name:t,emoji:n})}})},rn=[he,{name:"Whist",Host:(g={maxPlayers:4,minPlayers:4},O=function(e){var t=e.state;return e.roomId,e.moves,e.connections,Object(le.jsxs)(Jt,{children:[Object(le.jsx)(Lt,{colour:"R"}),Object(le.jsx)(Kt,{children:t.discard&&t.discard.map((function(e){var t=e.suit,n=e.value;return Object(le.jsx)(At,{suit:t,value:n})}))})]})},function(e){var t=e.children,n=Object(G.a)(e,["children"]);return Object(le.jsx)($t,Object(w.a)(Object(w.a)(Object(w.a)({},g),n),{},{children:Object(le.jsx)(O,Object(w.a)(Object(w.a)({},n),{},{children:t}))}))}),Guest:function(e){return function(t){var n=t.children,o=Object(G.a)(t,["children"]);return Object(le.jsx)(cn,Object(w.a)(Object(w.a)({},o),{},{children:Object(le.jsx)(e,Object(w.a)(Object(w.a)({},o),{},{children:n}))}))}}((function(e){var t=e.state;e.roomId,e.moves,e.connectionId;return Object(le.jsx)(Jt,{children:Object(le.jsx)(Kt,{children:t.hand&&t.hand.map((function(e){var t=e.suit,n=e.value;return Object(le.jsx)(At,{suit:t,value:n})}))})})})),game:Nt}],an=n(81),sn=n.n(an),un=n(82),dn=n.n(un),ln=[[0,1,2],[0,2,1],[1,0,2],[2,0,1],[2,1,0],[1,2,0]],mn=function(e){var t=function(e){var t=e.split("-"),n=Object(H.a)(t).sort(),o=t.map((function(e){return n.findIndex((function(t){return e===t}))}));return ln.findIndex((function(e){return dn()(e,o)}))}(e);return rn[t]},fn=function(e){var t=Object(h.useState)({name:null,Host:null,Guest:null,game:null}),n=Object(k.a)(t,2),o=n[0],c=n[1];return Object(h.useEffect)((function(){return c(mn(e))}),[]),o},jn=function(e){var t=e.onNewGame,n=Object(h.useState)(0),o=Object(k.a)(n,2),c=o[0],r=o[1],a=function(){return t(c)};return Object(le.jsxs)(Yt.Box,{my:4,width:["100%","80%","35em"],children:[Object(le.jsx)(en.Select,{m:1,onChange:function(e){r(e.target.value),e.preventDefault()},value:c,children:rn.map((function(e,t){var n=e.name;return Object(le.jsx)("option",{value:t,children:n},t)}))}),Object(le.jsx)(Yt.Button,{m:1,onClick:a,onKeyPress:a,children:"Host New Game"})]})},bn=function(e){var t=e.onJoinGame,n=Object(h.useState)(),o=Object(k.a)(n,2),c=o[0],r=o[1],a=function(){return t(c)};return Object(le.jsxs)(Yt.Box,{my:4,width:["100%","80%","35em"],children:[Object(le.jsxs)(Yt.Box,{children:[Object(le.jsx)(en.Label,{children:"Room Password"}),Object(le.jsx)(en.Input,{onChange:function(e){r(e.target.value),e.preventDefault()},value:c})]}),Object(le.jsx)(Yt.Button,{m:1,onClick:a,onKeyPress:a,children:"Join Game"})]})},vn=function(){var e=Object(ie.f)().push;return Object(le.jsxs)(Yt.Flex,{mx:["2em","15%","20%"],flexDirection:"column",children:[Object(le.jsx)(Yt.Heading,{mt:4,fontSize:[5,6],color:"primary",children:"Compendium Games"}),Object(le.jsx)(jn,{onNewGame:function(t){var n=function(e){var t=ln[e],n=sn()({exactly:3}).sort();return t.map((function(e){return n[e]})).join("-")}(t);e("/host/".concat(n))}}),Object(le.jsx)(bn,{onJoinGame:function(t){e("/guest/".concat(t))}})]})},gn=n(83),On=n.n(gn).a,hn=function(){var e=Object(ie.g)().roomId,t=fn(e),n=t.theme,o=t.Host,c=t.game,r=V({roomId:e,game:c}),a=r.state,i=r.moves,s=r.connections;return Object(le.jsx)(I.ThemeProvider,{theme:n||On,children:o&&Object(le.jsx)(o,{roomId:e,state:a,moves:i,connections:s})})},pn=function(){var e=Object(ie.g)().roomId,t=fn(e),n=t.theme,o=t.Guest,c=t.game,r=ae({roomId:e,game:c}),a=r.connectionId,i=r.connected,s=r.state,u=r.moves;return Object(le.jsx)(I.ThemeProvider,{theme:n||On,children:o&&Object(le.jsx)(o,{connectionId:a,roomId:e,connected:i,state:s,moves:u})})},xn=function(){return Object(le.jsx)(se.a,{children:Object(le.jsxs)(ie.c,{children:[Object(le.jsx)(ie.a,{path:"/host/:roomId",children:Object(le.jsx)(hn,{})}),Object(le.jsx)(ie.a,{path:"/guest/:roomId",children:Object(le.jsx)(pn,{})}),Object(le.jsx)(ie.a,{exact:!0,path:"/",children:Object(le.jsx)(I.ThemeProvider,{theme:On,children:Object(le.jsx)(vn,{})})})]})})},Sn=function(){return Object(le.jsx)(xn,{})},In=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,177)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),o(e),c(e),r(e),a(e)}))};S.a.render(Object(le.jsx)(p.a.StrictMode,{children:Object(le.jsx)(Sn,{})}),document.getElementById("root")),In()},96:function(e,t){},98:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=98}},[[174,1,2]]]);
//# sourceMappingURL=main.9101aa4d.chunk.js.map