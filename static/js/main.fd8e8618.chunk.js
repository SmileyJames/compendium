(this["webpackJsonp@compendium/app"]=this["webpackJsonp@compendium/app"]||[]).push([[0],Array(42).concat([function(e,t,n){"use strict";n.r(t),n.d(t,"NOUGHTS",(function(){return a})),n.d(t,"CROSSES",(function(){return c}));var r=n(5),o=n(14),a=1,c=2,u={guestMoves:{fillSquare:function(e){var t=e.state,n=e.connectionId,u=e.args,i=null;if(n===t.crossesPlayer)i=c;else{if(n!==t.noughtsPlayer)throw new Error("Connection is not a player");i=a}if(null!==t.board[u.position])throw new Error("Position filled");var l=Object(o.a)(t.board);return l.splice(u.position,1,i),Object(r.a)(Object(r.a)({},t),{},{board:l})}},hostMoves:{startGame:function(e){e.state,e.connectionId;var t=e.args;return{crossesPlayer:t.crossesConnId,noughtsPlayer:t.noughtsConnId,board:Array(9).fill(null)}}}};t.default=u},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Host",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"Guest",{enumerable:!0,get:function(){return o.default}});var r=a(n(105)),o=a(n(173));function a(e){return e&&e.__esModule?e:{default:e}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Host",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"Guest",{enumerable:!0,get:function(){return a.default}}),t.withHostPlayers=t.withGuestPlayers=void 0;var r=c(n(0)),o=c(n(106)),a=c(n(112));function c(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}t.withGuestPlayers=function(e){return function(t){var n=t.children,o=i(t,["children"]);return r.default.createElement(a.default,o,r.default.createElement(e,o,n))}};t.withHostPlayers=function(e,t){return function(n){var a=n.children,c=i(n,["children"]);return r.default.createElement(o.default,u({},e,c),r.default.createElement(t,c,a))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"EmojiPicker",{enumerable:!0,get:function(){return o.default}}),t.default=void 0;var r=a(n(107)),o=a(n(109));function a(e){return e&&e.__esModule?e:{default:e}}var c=r.default;t.default=c},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={PlayingCardFront:!0,PlayingCardBack:!0,FeltTable:!0,Hand:!0};Object.defineProperty(t,"PlayingCardFront",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"PlayingCardBack",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"FeltTable",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Hand",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var o=l(n(113)),a=l(n(167)),c=l(n(170)),u=l(n(172)),i=n(61);function l(e){return e&&e.__esModule?e:{default:e}}Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var f=o.default;t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KING=t.QUEEN=t.JACK=t.ACE=t.JOKER=t.VALUES=t.SUITS=void 0;t.SUITS=["H","D","S","C"];t.KING=13,t.QUEEN=12,t.JACK=11,t.ACE=1,t.JOKER=0;var r=[1,2,3,4,5,6,7,8,9,10,11,12,13];t.VALUES=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,a,c,u,i=f(n(0)),l=f(n(17));function f(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=l.default.div(r||(r=s(["\n  margin-bottom: -9em;\n  margin-right: -3em;\n\n  ","\n"])),(function(e){var t=e.order;return t&&"order: ".concat(t,";")})),m=l.default.div(o||(o=s(["\n  position: relative;\n  margin-top: 2em;\n"]))),v=(0,l.default)(m)(a||(a=s(["\n  &:hover {\n    margin-top: 1em;\n    margin-bottom: 1em;\n    cursor: pointer;\n  }\n\n  ","\n"])),(function(e){return e.isSelected&&"\n    margin-top: 0em;\n    margin-bottom: 2em;\n\n    &:hover {\n      margin-top: 0em;\n      margin-bottom: 2em;\n    }\n  "})),b=l.default.div(c||(c=s(["\n  opacity: 0.4;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  border-radius: 0.5em;\n\n  ","\n"])),(function(e){var t=e.isSelected,n=e.selectColor;return t&&n&&"\n    background-color: ".concat(n,";\n  ")})),p=l.default.img(u||(u=s(["\n  width: 9em;\n  display: block;\n"]))),g=function(e){var t=e.isSelected,n=e.selectColor,r=e.faceImage,o=e.altText,a=e.onClick;return i.default.createElement(v,{isSelected:t},i.default.createElement(p,{src:r,alt:o}),i.default.createElement(b,{isSelected:t,selectColor:n,onClick:a}))},y=function(e){var t=e.faceImage,n=e.altText;return i.default.createElement(m,null,i.default.createElement(p,{src:t,alt:n}))},j=function(e){var t=e.order,n=e.canBeSelected,r=e.isSelected,o=e.selectColor,a=e.faceImage,c=e.altText,u=e.onClick,l=n?g:y;return i.default.createElement(d,{order:t},i.default.createElement(l,{isSelected:r,selectColor:o,faceImage:a,altText:c,onClick:u}))};t.default=j},,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a,c,u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=o?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=n(43),l=(o=n(17))&&o.__esModule?o:{default:o},f=n(42);function s(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(i){o=!0,a=i}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var b=l.default.div(a||(a=v(["\n  width: 33.333%;\n  height: 33.333%;\n  background-color: cyan;\n  border: 2px solid yellow;\n  color: black;\n  text-align: center;\n  float: left;\n  box-sizing: border-box;\n"]))),p=l.default.div(c||(c=v(["\n  width: 30em;\n  height: 30em;\n"]))),g=function(e){var t=e.state,n=e.roomId,r=e.moves,o=e.connections;return(0,u.useEffect)((function(){if(!t.board&&o.length>=2){var e=d(o,2),n=e[0],a=e[1];r.startGame({crossesConnId:n,noughtsConnId:a})}}),[o]),u.default.createElement(u.default.Fragment,null,o.length<2&&u.default.createElement(i.Link,{to:"/guest/".concat(n)},window.location.host,"#/guest/",n),u.default.createElement(p,null,t.board&&t.board.map((function(e,t){return u.default.createElement(b,{key:t},e===f.NOUGHTS?"O":null,e===f.CROSSES?"X":null)}))))};t.default=g},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,a,c=l(n(0)),u=l(n(17)),i=n(42);function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var s=u.default.button(r||(r=f(["\n  width: 33.333%;\n  height: 33.333%;\n  background-color: white;\n  border: 2px solid red;\n  color: black;\n  text-align: center;\n  float: left;\n  box-sizing: border-box;\n"]))),d=u.default.div(o||(o=f(["\n  width: 33.333%;\n  height: 33.333%;\n  background-color: white;\n  border: 2px solid red;\n  color: black;\n  text-align: center;\n  float: left;\n  box-sizing: border-box;\n"]))),m=u.default.div(a||(a=f(["\n  width: 30em;\n  height: 30em;\n"]))),v=function(e){var t=e.value,n=e.onClick;return null===t?c.default.createElement(s,{onClick:n}):c.default.createElement(d,null,t===i.NOUGHTS?"O":null,t===i.CROSSES?"X":null)},b=function(e){var t=e.connected,n=e.state,r=e.moves;return c.default.createElement(c.default.Fragment,null,t?null:c.default.createElement("p",null,"Disconnected.."),c.default.createElement(m,null,n.board&&n.board.map((function(e,n){return c.default.createElement(v,{key:n,value:e,onClick:function(){return t&&r.fillSquare({position:n})}})}))))};t.default=b},,,,,,,,,,,,,,,,function(e,t){},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=98},,,,,,,function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(0))&&o.__esModule?o:{default:o},c=n(57),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=o?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(60));function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}var l=(0,c.withHostPlayers)({maxPlayers:4,minPlayers:4},(function(e){var t=e.state;e.roomId,e.moves,e.connections;return a.default.createElement(u.FeltTable,null,a.default.createElement(u.PlayingCardBack,{colour:"R"}),a.default.createElement(u.Hand,null,t.discard&&t.discard.map((function(e){var t=e.suit,n=e.value;return a.default.createElement(u.default,{suit:t,value:n})}))))}));t.default=l},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=o?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),a=(u(n(17)),u(n(58))),c=n(22);function u(e){return e&&e.__esModule?e:{default:e}}function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}var l=function(e){var t=e.children,n=e.players;return o.default.createElement(c.Flex,null,o.default.createElement(c.Box,{flexGrow:1},n.map((function(e,t){var n=e.name,r=e.emoji;return o.default.createElement(c.Flex,{alignItems:"center",key:t},o.default.createElement(c.Box,{width:"2em",height:"2em",my:2,mx:3},r&&o.default.createElement(a.default,{emoji:r})),n)}))),o.default.createElement(c.Box,{flexGrow:3},t))},f=function(e){var t=e.roomId;return o.default.createElement(c.Text,{fontSize:[3,4,5],fontWeight:"bold",color:"secondary"},"Join: ",t)},s=function(e){var t=e.state,n=e.roomId,r=e.moves,a=(e.connections,e.maxPlayers),u=e.minPlayers,i=e.children;if((0,o.useEffect)((function(){!t.players&&null!==r&&void 0!==r&&r.initPlayers&&r.initPlayers({maxPlayers:a,minPlayers:u})}),[t.players,r]),!t.players)return null;if(t.players.everyonesIn)return i;var s=function(e){var t=e.state.players;return t.list.length>=t.minPlayers}({state:t});return o.default.createElement(l,{players:t.players.list},o.default.createElement(c.Flex,{height:"100%",flexDirection:"column",alignItems:"center",justifyContent:"space-around"},o.default.createElement(f,{roomId:n}),s&&o.default.createElement(c.Button,{my:2,onClick:function(){return r.startGame()},onKeyPress:function(){return r.startGame()}},"Start Game")))};t.default=s},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=o?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),c=(o=n(108))&&o.__esModule?o:{default:o};function u(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}var i=(0,a.memo)((function(e){var t=e.emoji;return a.default.createElement("span",{dangerouslySetInnerHTML:{__html:c.default.parse(t,{folder:"svg",ext:".svg"})}})}));t.default=i},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o,a=i(n(0)),c=i(n(17)),u=n(243);function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n(111);var f=c.default.div(r||(r=l(["\n  background-color: rgba(0, 0, 0, 0.8);\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),s=c.default.div(o||(o=l(["\n  display: inline-block;\n"]))),d=function(e){var t=e.onSelectEmoji,n=e.onHide;return a.default.createElement(f,{tabIndex:!0,onKeyPress:n,onClick:n},a.default.createElement(s,{onClick:function(e){return e.stopPropagation()}},a.default.createElement(u.Picker,{onSelect:function(e){t(e.native)},set:"twitter"})))};t.default=d},,,function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=f(n(0)),c=((o=n(17))&&o.__esModule,f(n(58))),u=n(22),i=n(33);function l(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=o?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(i){o=!0,a=i}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=function(e){var t=e.onJoin,n=s((0,a.useState)(""),2),r=n[0],o=n[1],l=s((0,a.useState)("\ud83d\ude0e"),2),f=l[0],d=l[1],m=s((0,a.useState)(!1),2),v=m[0],b=m[1],p=function(){return b(!0)},g=function(){return b(!1)},y=function(){(null===r||void 0===r?void 0:r.length)&&t({name:r,emoji:f})};return a.default.createElement(a.default.Fragment,null,v&&a.default.createElement(c.EmojiPicker,{onHide:g,onSelectEmoji:function(e){d(e),g()}}),a.default.createElement(u.Flex,{my:5,alignItems:"center",flexDirection:"column"},a.default.createElement(u.Box,{width:"10em",height:"10em",onKeyPress:p,onClick:p},a.default.createElement(c.default,{emoji:f})),a.default.createElement(u.Box,{my:2},a.default.createElement(u.Text,{fontSize:[3,4,5],fontWeight:"bold",color:"primary"},r)),a.default.createElement(u.Box,null,a.default.createElement(i.Label,{htmlFor:"nickname"},"Nickname"),a.default.createElement(i.Input,{id:"nickname",onChange:function(e){return o(e.target.value)},value:r})),a.default.createElement(u.Box,{my:3},a.default.createElement(u.Button,{variant:"primary",onKeyPress:y,onClick:y},"Sit down to Play"))))},v=function(){return a.default.createElement(u.Flex,{height:"100vh",justifyContent:"center",alignItems:"center"},a.default.createElement(u.Text,{fontSize:[3,4,5],fontWeight:"bold",color:"primary"},"You are a Spectator"))},b=function(){return a.default.createElement(u.Flex,{height:"100vh",justifyContent:"center",alignItems:"center"},a.default.createElement(u.Text,{fontSize:[3,4,5],fontWeight:"bold",color:"primary"},"Be patient, the host is setting up your game."))},p=function(e){var t=e.children,n=e.state,r=(e.roomId,e.moves),o=e.connectionId;if(!n.players)return a.default.createElement(b,null);var c=function(e){var t=e.players,n=e.connectionId;return t.findIndex((function(e){return e.connectionId===n}))>-1}({players:n.players.list,connectionId:o});if(n.players.everyonesIn)return c?t:a.default.createElement(v,null);var u=function(e){var t=e.state.players;return t.list.length>t.maxPlayers}({state:n});return c||u?a.default.createElement(b,null):a.default.createElement(m,{onJoin:function(e){var t=e.name,n=e.emoji;r.joinAsAPlayer({name:t,emoji:n})}})};t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=ae(n(0)),o=ae(n(114)),a=ae(n(115)),c=ae(n(116)),u=ae(n(117)),i=ae(n(118)),l=ae(n(119)),f=ae(n(120)),s=ae(n(121)),d=ae(n(122)),m=ae(n(123)),v=ae(n(124)),b=ae(n(125)),p=ae(n(126)),g=ae(n(127)),y=ae(n(128)),j=ae(n(129)),O=ae(n(130)),S=ae(n(131)),h=ae(n(132)),I=ae(n(133)),E=ae(n(134)),C=ae(n(135)),P=ae(n(136)),x=ae(n(137)),w=ae(n(138)),_=ae(n(139)),M=ae(n(140)),D=ae(n(141)),H=ae(n(142)),k=ae(n(143)),T=ae(n(144)),A=ae(n(145)),z=ae(n(146)),L=ae(n(147)),K=ae(n(148)),G=ae(n(149)),N=ae(n(150)),J=ae(n(151)),F=ae(n(152)),B=ae(n(153)),U=ae(n(154)),R=ae(n(155)),Q=ae(n(156)),W=ae(n(157)),q=ae(n(158)),V=ae(n(159)),X=ae(n(160)),$=ae(n(161)),Y=ae(n(162)),Z=ae(n(163)),ee=ae(n(164)),te=ae(n(165)),ne=ae(n(166)),re=n(61),oe=ae(n(62));function ae(e){return e&&e.__esModule?e:{default:e}}var ce=function(e){var t=e.value,n=e.suit,ae=e.canBeSelected,ce=void 0!==ae&&ae,ue=e.isSelected,ie=void 0!==ue&&ue,le=e.selectColor,fe=void 0===le?null:le;console.log("select",fe);var se=function(e){var t=e.suit,n=e.value;return n===re.JOKER?ne.default:n===re.ACE&&"H"===t?o.default:n===re.ACE&&"D"===t?c.default:n===re.ACE&&"S"===t?u.default:n===re.ACE&&"C"===t?a.default:2===n&&"H"===t?i.default:2===n&&"D"===t?f.default:2===n&&"S"===t?s.default:2===n&&"C"===t?l.default:3===n&&"H"===t?d.default:3===n&&"D"===t?v.default:3===n&&"S"===t?b.default:3===n&&"C"===t?m.default:4===n&&"H"===t?p.default:4===n&&"D"===t?y.default:4===n&&"S"===t?j.default:4===n&&"C"===t?g.default:5===n&&"H"===t?O.default:5===n&&"D"===t?h.default:5===n&&"S"===t?I.default:5===n&&"C"===t?S.default:6===n&&"H"===t?E.default:6===n&&"D"===t?P.default:6===n&&"S"===t?x.default:6===n&&"C"===t?C.default:7===n&&"H"===t?w.default:7===n&&"D"===t?M.default:7===n&&"S"===t?D.default:7===n&&"C"===t?_.default:8===n&&"H"===t?H.default:8===n&&"D"===t?T.default:8===n&&"S"===t?A.default:8===n&&"C"===t?k.default:9===n&&"H"===t?z.default:9===n&&"D"===t?K.default:9===n&&"S"===t?G.default:9===n&&"C"===t?L.default:10===n&&"H"===t?N.default:10===n&&"D"===t?F.default:10===n&&"S"===t?B.default:10===n&&"C"===t?J.default:n===re.JACK&&"H"===t?U.default:n===re.JACK&&"D"===t?Q.default:n===re.JACK&&"S"===t?W.default:n===re.JACK&&"C"===t?R.default:n===re.QUEEN&&"H"===t?q.default:n===re.QUEEN&&"D"===t?X.default:n===re.QUEEN&&"S"===t?$.default:n===re.QUEEN&&"C"===t?V.default:n===re.KING&&"H"===t?Y.default:n===re.KING&&"D"===t?ee.default:n===re.KING&&"S"===t?te.default:n===re.KING&&"C"===t?Z.default:void 0}({value:t,suit:n}),de=function(e){var t=e.value,n=e.suit;return t===re.JOKER?"\ud83c\udccf Joker":t===re.ACE&&"H"===n?"\ud83c\udcb1 Ace of Hearts":t===re.ACE&&"D"===n?"\ud83c\udcc1 Ace of Diamonds":t===re.ACE&&"S"===n?"\ud83c\udca1 Ace of Spaces":t===re.ACE&&"C"===n?"\ud83c\udcd1 Ace of Clubs":2===t&&"H"===n?"\ud83c\udcb2 Two of Hearts":2===t&&"D"===n?"\ud83c\udcc2 Two of Diamonds":2===t&&"S"===n?"\ud83c\udca2 Two of Spades":2===t&&"C"===n?"\ud83c\udcd2 Two of Clubs":3===t&&"H"===n?"\ud83c\udcb3 Three of Hearts":3===t&&"D"===n?"\ud83c\udcc3 Three of Diamonds":3===t&&"S"===n?"\ud83c\udca3 Three of Spades":3===t&&"C"===n?"\ud83c\udcd3 Three of Clubs":4===t&&"H"===n?"\ud83c\udcb4 Four of Hearts":4===t&&"D"===n?"\ud83c\udcc4 Four of Diamonds":4===t&&"S"===n?"\ud83c\udca4 Four of Spades":4===t&&"C"===n?"\ud83c\udcd4 Four of Clubs":5===t&&"H"===n?"\ud83c\udcb5 Five of Hearts":5===t&&"D"===n?"\ud83c\udcc5 Five of Diamonds":5===t&&"S"===n?"\ud83c\udca5 Five of Spades":5===t&&"C"===n?"\ud83c\udcd5 Five of Clubs":6===t&&"H"===n?"\ud83c\udcb6 Six of Hearts":6===t&&"D"===n?"\ud83c\udcc6 Six of Diamomnds":6===t&&"S"===n?"\ud83c\udca6 Six of Spades":6===t&&"C"===n?"\ud83c\udcd6 Six of Clubs":7===t&&"H"===n?"\ud83c\udcb7 Seven of Hearts":7===t&&"D"===n?"\ud83c\udcc7 Seven of Diamonds":7===t&&"S"===n?"\ud83c\udca7 Seven of Spades":7===t&&"C"===n?"\ud83c\udcd7 Seven of Clubs":8===t&&"H"===n?"\ud83c\udcb8 Eight of Hearts":8===t&&"D"===n?"\ud83c\udcc8 Eight of Diamonds":8===t&&"S"===n?"\ud83c\udca8 Eight of Spades":8===t&&"C"===n?"\ud83c\udcd8 Eight of Clubs":9===t&&"H"===n?"\ud83c\udcb9 Nine of Hearts":9===t&&"D"===n?"\ud83c\udcc9 Nine of Diamonds":9===t&&"S"===n?"\ud83c\udca9 Nine of Spades":9===t&&"C"===n?"\ud83c\udcd9 Nine of Clubs":10===t&&"H"===n?"\ud83c\udcba Ten of Hearts":10===t&&"D"===n?"\ud83c\udcca Ten of Diamonds":10===t&&"S"===n?"\ud83c\udcaa Ten of Spades":10===t&&"C"===n?"\ud83c\udcda Ten of Clubs":t===re.JACK&&"H"===n?"\ud83c\udcbb Jack of Hearts":t===re.JACK&&"D"===n?"\ud83c\udccb Jack of Diamonds":t===re.JACK&&"S"===n?"\ud83c\udcab Jack of Spades":t===re.JACK&&"C"===n?"\ud83c\udcdb Jack of Clubs":t===re.QUEEN&&"H"===n?"\ud83c\udcbd Queen of Hearts":t===re.QUEEN&&"D"===n?"\ud83c\udccd Queen of Diamonds":t===re.QUEEN&&"S"===n?"\ud83c\udcad Queen of Spades":t===re.QUEEN&&"C"===n?"\ud83c\udcdd Queen of Clubs":t===re.KING&&"H"===n?"\ud83c\udcbe King of Hearts":t===re.KING&&"D"===n?"\ud83c\udcde King of Diamonds":t===re.KING&&"S"===n?"\ud83c\udcae King of Spades":t===re.KING&&"C"===n?"\ud83c\udcde King of Clubs":void 0}({value:t,suit:n});return r.default.createElement(oe.default,{faceImage:se,altText:de,isSelected:ie,canBeSelected:ce,selectColor:fe})};t.default=ce},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/AH.1a5ea790.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/AC.0e3c2151.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/AD.5c4da062.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/AS.0beacefa.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/2H.cb701b97.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/2C.276c3f69.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/2D.bc21ec2a.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/2S.ec187ad2.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/3H.cba17cfa.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/3C.4defbcf5.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/3D.8d12a3fc.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/3S.ed80cdda.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/4H.8924ea52.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/4C.3ebe0e73.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/4D.433a1ecc.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/4S.7e474260.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/5H.04a38bb9.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/5C.809e552d.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/5D.03b1a4af.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/5S.f4e082a6.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/6H.5380d254.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/6C.1f69ca79.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/6D.8c9d26ce.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/6S.33eb8c1b.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/7H.156a2f08.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/7C.cb6a5b5c.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/7D.bc93fd45.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/7S.f91490c5.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/8H.878dbca5.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/8C.e91af699.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/8D.ca4420e9.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/8S.fd5cd6f8.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/9H.57bfd8e3.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/9C.c6a841cc.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/9D.3d612a15.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/9S.6c7e4615.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/10H.c8c8e4de.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/10C.0cc64a48.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/10D.956683a1.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/10S.99cb26ab.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/JH.86f58f4f.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/JC.b801c5a7.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/JD.a0e75607.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/JS.1a6f34e2.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/QH.f56614ef.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/QC.3eb5bae0.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/QD.c20eb8d2.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/QS.cc68ac97.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/KH.3d6b1be6.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/KC.ca193598.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/KD.32d1a9f8.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/KS.b54b6bba.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/JOKER.96be08d3.svg"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(0)),o=u(n(168)),a=u(n(169)),c=u(n(62));function u(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t=e.colour,n=e.isSelected,u=void 0!==n&&n,i=e.canBeSelected,l=void 0!==i&&i,f=e.selectColor,s=void 0===f?null:f,d=function(e){var t=e.colour;return"R"===t?o.default:"B"===t?a.default:void 0}({colour:t});return r.default.createElement(c.default,{faceImage:d,altText:"\ud83c\udca0 Card Back",isSelected:u,canBeSelected:l,selectColor:s})};t.default=i},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/RED_BACK.eea8c6b0.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/BLUE_BACK.d7aabd90.svg"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=c(n(17)),a=c(n(171));function c(e){return e&&e.__esModule?e:{default:e}}var u,i,l=o.default.div(r||(u=["\n  background-color: rgb(10, 80, 20);\n  background-image: url(",");\n  height: 100%;\n  padding: 5%;\n"],i||(i=u.slice(0)),r=Object.freeze(Object.defineProperties(u,{raw:{value:Object.freeze(i)}}))),a.default);t.default=l},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/felt.5b148bae.png"},function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,c,u=((r=n(17))&&r.__esModule?r:{default:r}).default.section(o||(a=["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-evenly;\n  max-height: 50%;\n\n  padding-right: 3em;\n  padding-bottom: 9em;\n"],c||(c=a.slice(0)),o=Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(c)}}))));t.default=u},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=n(0))&&o.__esModule?o:{default:o},c=n(57),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=o?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(60));function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}var l=(0,c.withGuestPlayers)((function(e){var t=e.state;e.roomId,e.moves,e.connectionId;return a.default.createElement(u.FeltTable,null,a.default.createElement(u.Hand,null,t.hand&&t.hand.map((function(e){var t=e.suit,n=e.value;return a.default.createElement(u.default,{suit:t,value:n})}))))}));t.default=l},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(74),c=n.n(a),u=n(17),i=n(44),l=n.n(i),f=function(e){var t=e.connectionId,n=e.roomId,r=e.game,o=e.move,a=d({connectionId:t,roomId:n,game:r,move:o});try{return a({})instanceof Function}catch(c){return!1}},s=function(e){var t=e.connectionId,n=e.roomId,r=e.game;return t===n?r.hostMoves:r.guestMoves},d=function(e){var t=e.connectionId,n=e.roomId,r=e.game,o=e.move;return s({connectionId:t,roomId:n,game:r})[o]},m=function(e){var t=e.game,n=e.events,r=e.roomId;return function(e){try{return n.reduce((function(e,n){var o=d({connectionId:n.connectionId,roomId:r,game:t,move:n.move})({state:e,roomId:r,connectionId:n.connectionId,args:n.args});o instanceof Function&&n.seed&&(o=o(l()(n.seed)));return o}),e)}catch(o){return console.error(o),e}}},v=function(e){var t=e.game,n=e.connectionId,r=e.roomId,o=e.handleMove;return new Proxy({},{get:function(e,a,c){var u=s({connectionId:n,roomId:r,game:t});return u.hasOwnProperty(a)?function(e){return o({move:a,args:e})}:a===Symbol.iterator&&u?u.keys().bind(e)[Symbol.iterator]:Reflect.get(e,a,c)}})},b=n(4),p=function(e,t,n){var o=Object(r.useState)((function(){return JSON.parse(e.getItem(t))||(n instanceof Function?n():n)})),a=Object(b.a)(o,2),c=a[0],u=a[1],i=Object(r.useState)((function(){try{var e=window.localStorage.getItem(t);return e?JSON.parse(e):n}catch(r){return console.error(r),n}})),l=Object(b.a)(i,2);l[0],l[1];return Object(r.useEffect)((function(){e.setItem(t,JSON.stringify(c))}),[t,c]),[c,u]},g=function(e){var t=e.roomId,n=e.game,o=e.eventLog,a=Object(r.useRef)(),c=function(e){var t=p(window.localStorage,"hostState-".concat(e),{}),n=Object(b.a)(t,2);return{state:n[0],setState:n[1]}}(t),u=c.state,i=c.setState;return Object(r.useEffect)((function(){var e=o.slice(a.current||0);t&&n&&e.length&&(!function(e){var t=e.roomId,n=e.setState,r=e.game,o=e.events;n(m({game:r,roomId:t,events:o}))}({roomId:t,setState:i,game:n,events:e}),a.current=o.length)}),[i,t,n,o,a]),{state:u}},y=n(85),j=n(14),O=n(35),S=n(5),h=function(e){return e()},I=function(e){var t=e.setEventLog,n=e.event,r=e.connectionId,o=e.roomId,a=e.game,c=e.random,u=f({connectionId:r,roomId:o,game:a,move:n.move})?Object(S.a)(Object(S.a)({},n),{},{connectionId:r,seed:h(c)}):Object(S.a)(Object(S.a)({},n),{},{connectionId:r});t((function(e){return[].concat(Object(j.a)(e),[u])}))},E=n(75),C=n.n(E),P=function(e){(0,e.setPeer)((function(e){return e&&e.destroy(),null}))},x={host:"peerjs.92k.de",secure:!0},w=function(e){var t=Object(r.useState)(),n=Object(b.a)(t,2),o=n[0],a=n[1],c=Object(r.useState)(!1),u=Object(b.a)(c,2),i=u[0],l=u[1],f=Object(r.useReducer)((function(e){return e+1}),0),s=Object(b.a)(f,2),d=s[0],m=s[1];return Object(r.useEffect)((function(){if(!i){var t=new C.a(e,x);a(t);var n=function(){l(!1),P({setPeer:a}),m()},r=setTimeout(n,1e3);t.on("open",(function(){clearTimeout(r),l(!0)}));var o=function(){clearTimeout(r),r=setTimeout(n,1e3)};return t.on("close",o),t.on("disconnected",o),t.on("error",o),function(){P({setPeer:a}),clearTimeout(r)}}}),[d,e]),{open:i,peer:o}},_=function(e){var t=e.game,n=e.roomId,o=(e.eventLog,e.setEventLog),a=e.random,c=w(n).peer,u=Object(r.useState)([]),i=Object(b.a)(u,2),l=i[0],f=i[1],s=Object(r.useRef)({});return Object(r.useEffect)((function(){c&&c.on("connection",(function(e){e.on("open",(function(){!function(e){var t=e.setConnections,n=e.conn;t((function(e){return[].concat(Object(j.a)(e),[n])}))}({setConnections:f,conn:e})})),e.on("data",(function(r){var c=r.index,u=Object(y.a)(r,["index"]);Object(O.isInteger)(c)&&function(e){var t=e.conn,n=e.connectionLogSizeMap,r=e.size,o=void 0===r?0:r;n.current[t.peer]=o}({conn:e,connectionLogSizeMap:s,size:c+1}),(Object(O.isInteger)(c)||null===c)&&function(e,t){return e&&Object(O.isString)(e.move)&&Object(O.isObject)(e.args)&&t.findIndex((function(t){return t===e.move}))>-1}(u,Object.keys(t.guestMoves))&&I({setEventLog:o,event:u,connectionId:e.peer,roomId:n,game:t,random:a})})),e.on("close",(function(){!function(e){var t=e.setConnections,n=e.conn;t((function(e){return e.filter((function(e){return e!==n}))}))}({setConnections:f,conn:e})})),e.on("error",(function(t){console.error(e.peer,t)}))}))}),[c,t,n]),{connections:l,connectionLogSizeMap:s}},M=function(e){var t=e.roomId,n=e.game,o=e.setEventLog,a=e.random,c=Object(r.useState)(null),u=Object(b.a)(c,2),i=u[0],l=u[1];return Object(r.useEffect)((function(){n&&function(e){var t=e.setMoves,n=e.game,r=e.roomId,o=e.setEventLog,a=e.random,c=function(e){var t=e.move,c=e.args;I({setEventLog:o,event:{move:t,args:c},connectionId:r,roomId:r,game:n,random:a})};t((function(){return v({game:n,connectionId:r,roomId:r,handleMove:c})}))}({setMoves:l,game:n,roomId:t,setEventLog:o,random:a})}),[t,n,o]),{moves:i,setMoves:l}},D=n(76),H=function(e){var t=e.connections,n=e.connectionLogSizeMap,o=e.eventLog;Object(r.useEffect)((function(){var e,r=Object(D.a)(t);try{var a=function(){var t=e.value,r=n.current[t.peer]||0;if(o.length>r){var a=o.slice(r).map((function(e,t){return Object(S.a)(Object(S.a)({},e),{},{index:r+t})}));t.send(a)}};for(r.s();!(e=r.n()).done;)a()}catch(c){r.e(c)}finally{r.f()}}),[t,n,o])},k=function(e){var t=e.roomId,n=e.game,o=e.secret,a=Object(r.useMemo)((function(){return l()(o||t)}),[o,t]),c=function(e){var t=p(window.localStorage,"eventLog-".concat(e),[]),n=Object(b.a)(t,2);return{eventLog:n[0],setEventLog:n[1]}}(t),u=c.eventLog,i=c.setEventLog,f=g({roomId:t,game:n,eventLog:u}).state,s=_({game:n,roomId:t,eventLog:u,setEventLog:i,random:a}),d=s.connections,m=s.connectionLogSizeMap,v=Object(r.useMemo)((function(){return d.map((function(e){return e.peer}))}),[d]),y=M({roomId:t,game:n,setEventLog:i,random:a}).moves;return H({connections:d,connectionLogSizeMap:m,eventLog:u}),{state:f,moves:y,connections:v}},T=function(e){var t=e-1;return t<0?null:t},A=function(e){var t=e.connected,n=e.conn,o=e.logSize;Object(r.useEffect)((function(){n.current&&t&&function(e){var t=e.conn,n=e.logSize;t.current.send({index:T(n)})}({conn:n,logSize:o})}),[t,n.current,o])},z=function(e){var t=e.data,n=e.clearData,o=e.game,a=e.roomId,c=e.setState,u=e.setLogSize;Object(r.useEffect)((function(){if(t&&t.length){var e=Object(j.a)(t);n(),function(e){var t=e.setLogSize,n=e.events;t(n[n.length-1].index+1)}({setLogSize:u,events:e}),function(e){var t=e.setState,n=(e.setCache,e.roomId),r=e.game,o=e.events,a=m({game:r,roomId:n,events:o});t((function(e){var t=e.state,n=a(t);return{state:n,cache:n}}))}({setState:c,roomId:a,game:o,events:e})}}),[t,n,o,a,u,c])},L=function(e){var t=e.conn,n=e.connectionId,r=e.setMoves,o=e.setState,a=e.game,c=e.logSize,u=e.roomId,i=function(e){var r=e.move,i=e.args;f({connectionId:n,roomId:u,game:a,move:r})||function(e){var t=e.setState,n=e.game,r=e.move,o=e.args,a=e.connectionId,c=e.roomId,u=m({game:n,roomId:c,events:[{move:r,args:o,connectionId:a}]});t((function(e){var t=e.state,n=e.cache;return{cache:u(n),state:t}}))}({setState:o,game:a,move:r,args:i,roomId:u,connectionId:n}),function(e){var t=e.conn,n=e.logSize,r=e.move,o=e.args;t.current.send({index:T(n),move:r,args:o})}({conn:t,move:r,args:i,logSize:c})};r((function(){return v({game:a,connectionId:n,roomId:u,handleMove:i})}))},K=function(e){var t=e.connected,n=e.conn,o=e.id,a=e.setState,c=e.roomId,u=e.game,i=e.logSize,l=Object(r.useState)(null),f=Object(b.a)(l,2),s=f[0],d=f[1];return Object(r.useEffect)((function(){t&&L({conn:n,connectionId:o,setMoves:d,setState:a,roomId:c,game:u,logSize:i})}),[t,n.current,o,d,a,c,u,i]),{moves:s}},G=function(e){var t=e.id,n=e.roomId,o=Object(r.useRef)(),a=w(t),c=a.open,u=a.peer,i=Object(r.useState)([]),l=Object(b.a)(i,2),f=l[0],s=l[1],d=Object(r.useState)(!1),m=Object(b.a)(d,2),v=m[0],p=m[1],g=Object(r.useReducer)((function(e){return e+1}),0),y=Object(b.a)(g,2),O=y[0],S=y[1];Object(r.useEffect)((function(){if(c&&!v){!function(e){var t=e.roomId,n=e.peer;e.conn.current=n.connect(t,{serialization:"json"})}({conn:o,peer:u,roomId:n});var e=function(){o.current=null,p(!1),S()},t=setTimeout(e,1e3);o.current.on("open",(function(){clearTimeout(t),p(!0)})),o.current.on("data",(function(e){s((function(t){return[].concat(Object(j.a)(t),Object(j.a)(e))}))})),o.current.on("close",(function(){clearTimeout(t),e()})),o.current.on("error",(function(e){console.error(e)}))}}),[O,c,v,n]);return{connected:c&&v,conn:o,data:f,clearData:function(){return s([])}}},N=n(245),J=function(e){var t=e.roomId,n=e.game,r=function(e){var t=p(window.localStorage,"id-".concat(e),N.a);return{id:Object(b.a)(t,1)[0]}}(t).id,o=function(e){var t=p(window.localStorage,"guestState-".concat(e),{state:{},cache:{}}),n=Object(b.a)(t,2);return{cache:n[0].cache,setState:n[1]}}(t),a=o.cache,c=o.setState,u=function(e){var t=p(window.localStorage,"logSize-".concat(e),0),n=Object(b.a)(t,2);return{logSize:n[0],setLogSize:n[1]}}(t),i=u.logSize,l=u.setLogSize,f=G({id:r,roomId:t}),s=f.connected,d=f.conn,m=f.data,v=f.clearData;return A({connected:s,conn:d,logSize:i}),z({data:m,clearData:v,game:n,roomId:t,setState:c,setLogSize:l}),{connectionId:r,connected:s,state:a,moves:K({connected:s,conn:d,id:r,setState:c,roomId:t,game:n,logSize:i}).moves}},F=n(8),B=n(43),U=n(42),R=n(77),Q=n.n(R),W=n(81),q=n.n(W),V={name:"Tic Tac Toe",Host:Q.a,Guest:q.a,game:U.default},X={guestMoves:{joinAsAPlayer:function(e){var t=e.state,n=e.connectionId,r=e.args;if(t.players.list.length>=t.players.maxPlayers)throw new Error("The number of players has reached it's maximum");var o={connectionId:n,name:r.name,emoji:r.emoji},a=[].concat(Object(j.a)(t.players.list),[o]),c=Object(S.a)(Object(S.a)({},t.players),{},{list:a});return Object(S.a)(Object(S.a)({},t),{},{players:c})}},hostMoves:{initPlayers:function(e){var t=e.state,n=e.args,r={maxPlayers:n.maxPlayers,minPlayers:n.minPlayers,everyoneIsIn:!1,list:[]};return Object(S.a)(Object(S.a)({},t),{},{players:r})},everyoneIsIn:function(e){var t=e.state;if(t.players.list.length>t.players.maxPlayers)throw new Error("Too many players");if(t.players.list.length<t.players.minPlayers)throw new Error("Not enough players");return Object(S.a)(Object(S.a)({},t),{},{players:Object(S.a)(Object(S.a)({},t.players),{},{everyoneIsIn:!0})})}}},$={guestMoves:Object(S.a)({},X.guestMoves),hostMoves:Object(S.a)({},X.hostMoves)},Y=n(55),Z=[V,{name:"Whist",Host:Y.Host,Guest:Y.Guest,game:$}],ee=n(82),te=n.n(ee),ne=n(83),re=n.n(ne),oe=[[0,1,2],[0,2,1],[1,0,2],[2,0,1],[2,1,0],[1,2,0]],ae=function(e){var t=function(e){var t=e.split("-"),n=Object(j.a)(t).sort(),r=t.map((function(e){return n.findIndex((function(t){return e===t}))}));return oe.findIndex((function(e){return re()(e,r)}))}(e);return Z[t]},ce=function(e){var t=Object(r.useState)({name:null,Host:null,Guest:null,game:null}),n=Object(b.a)(t,2),o=n[0],a=n[1];return Object(r.useEffect)((function(){return a(ae(e))}),[]),o},ue=n(22),ie=n(33),le=n(2),fe=function(e){var t=e.onNewGame,n=Object(r.useState)(0),o=Object(b.a)(n,2),a=o[0],c=o[1],u=function(){return t(a)};return Object(le.jsxs)(ue.Box,{my:4,width:["100%","80%","35em"],children:[Object(le.jsx)(ie.Select,{m:1,onChange:function(e){c(e.target.value),e.preventDefault()},value:a,children:Z.map((function(e,t){var n=e.name;return Object(le.jsx)("option",{value:t,children:n},t)}))}),Object(le.jsx)(ue.Button,{m:1,onClick:u,onKeyPress:u,children:"Host New Game"})]})},se=function(e){var t=e.onJoinGame,n=Object(r.useState)(),o=Object(b.a)(n,2),a=o[0],c=o[1],u=function(){return t(a)};return Object(le.jsxs)(ue.Box,{my:4,width:["100%","80%","35em"],children:[Object(le.jsxs)(ue.Box,{children:[Object(le.jsx)(ie.Label,{children:"Room Password"}),Object(le.jsx)(ie.Input,{onChange:function(e){c(e.target.value),e.preventDefault()},value:a})]}),Object(le.jsx)(ue.Button,{m:1,onClick:u,onKeyPress:u,children:"Join Game"})]})},de=function(){var e=Object(F.k)().push;return Object(le.jsxs)(ue.Flex,{mx:["2em","15%","20%"],flexDirection:"column",children:[Object(le.jsx)(ue.Heading,{mt:4,fontSize:[5,6],color:"primary",children:"Compendium Games"}),Object(le.jsx)(fe,{onNewGame:function(t){var n=function(e){var t=oe[e],n=te()({exactly:3}).sort();return t.map((function(e){return n[e]})).join("-")}(t);e("/host/".concat(n))}}),Object(le.jsx)(se,{onJoinGame:function(t){e("/guest/".concat(t))}})]})},me=n(84),ve=n.n(me).a,be=function(){var e=Object(F.m)().roomId,t=ce(e),n=t.theme,r=t.Host,o=t.game,a=k({roomId:e,game:o}),c=a.state,i=a.moves,l=a.connections;return Object(le.jsx)(u.ThemeProvider,{theme:n||ve,children:r&&Object(le.jsx)(r,{roomId:e,state:c,moves:i,connections:l})})},pe=function(){var e=Object(F.m)().roomId,t=ce(e),n=t.theme,r=t.Guest,o=t.game,a=J({roomId:e,game:o}),c=a.connectionId,i=a.connected,l=a.state,f=a.moves;return Object(le.jsx)(u.ThemeProvider,{theme:n||ve,children:r&&Object(le.jsx)(r,{connectionId:c,roomId:e,connected:i,state:l,moves:f})})},ge=function(){return Object(le.jsx)(B.HashRouter,{children:Object(le.jsxs)(F.g,{children:[Object(le.jsx)(F.d,{path:"/host/:roomId",children:Object(le.jsx)(be,{})}),Object(le.jsx)(F.d,{path:"/guest/:roomId",children:Object(le.jsx)(pe,{})}),Object(le.jsx)(F.d,{exact:!0,path:"/",children:Object(le.jsx)(u.ThemeProvider,{theme:ve,children:Object(le.jsx)(de,{})})})]})})},ye=function(){return Object(le.jsx)(ge,{})},je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,246)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),a(e),c(e)}))};c.a.render(Object(le.jsx)(o.a.StrictMode,{children:Object(le.jsx)(ye,{})}),document.getElementById("root")),je()}]),[[242,1,2]]]);
//# sourceMappingURL=main.fd8e8618.chunk.js.map